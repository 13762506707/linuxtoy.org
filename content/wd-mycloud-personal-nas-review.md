Title: WD MyCloud 个人 NAS 简评
Author: lovenemesis
Date: 2015-12-14
Category: Gadget
Tags: nas, embedded
Slug: wd-mycloud-personal-nas-review
Summary: 不知诸位刚刚过去的十一月剁了几只手呢？在下黑五淘的 WD MyCloud NAS 上周到货，在此分享下使用经验，说一些在其他的评论中不曾提到的问题。

[WD MyCloud NAS 官方产品说明页面](http://store.westerndigital.com/store/wdus/en_US/pd/ThemeID.21986300/productID.292209200/parid.56796900/catid.67754200/categoryID.67754400)

### 外观及做工

在下购买的型号算是 WD MyCloud 产品线中入门型号，根据美亚上客服的评论来看是使用的 WD NAS 专业 4TB 单碟红盘。千兆以太网口，USB3.0 接口，以及12V电源输入是背板上的全部 I/O，附带短短的千兆以太网线一根和**国际通用**的两相电源插头。

纯白色的一体成型的外壳加上前面板幽幽的蓝色状态指示灯博得了不少评测人的赞赏，然而在下的电子设备几乎都是黑色的，呃…另外由于其顶部全部是散热开孔，所以只能直立摆放。

### 配置及系统

配置很简单，网线连接路由，电源连接插座即可，首次开机需要将近 10 分钟的时间初始化，这么长着实有些意外，原因后来揭晓。耐心的等待其状态指示灯变为蓝色后，其实无需多余配置已经可以当作普通的局域网 NAS 开始使用了。然而既然选择这款产品明显是无法满足单纯的局域网文件共享的，这便需要登录器配置面板做些配置。

MyCloud 默认通过 DHCP 方式获取 IP 地址且通过 mDNS 在局域网声明。于是抛开用不上的 Win 及 OS X 客户端，在 Linux 下直接使用 Web 浏览器访问 [http://wdmycloud.local](http://wdmycloud.local) 即可打开 MyCloud 的配置面板，并非像不少美亚评论的那样非要输入 IP。 值得注意的是，似乎是由于 Android 系统下由于没有 mDNS 的缘故，在浏览器中输入上述 URL 并不会将其导向到 MyCloud 配置面板。此时可以登录路由器查看其 IP 地址，或者通过诸如 ES 文件浏览器之类支持网络访问的文件管理器扫描下获知其 IP 地址。

访问配置面板会强制要求创建至少一个 MyCloud.com 账户，哪怕不需要远程访问，呃，好吧…之前在其官网查阅得知其有固件更新，于是便先点击主页面上大大的检查更新按钮了。下述的所有经历都以基于当下最新的 MyCloudOS 4.0.4 版本为例。

不知道是不是新版本固件的缘故，不少评论中诟病的磁盘休眠功能在这里工作良好，完全不需要关闭。该功能可以在闲置时将磁盘休眠，降低功耗并延长磁盘寿命。至于是否需要指定静态 IP 纯属个人喜好了，完全不影响使用。对于在下来说，大部分默认配置都 OK，最后只关闭了 Time Machine。 

根据其说明书，MyCloud 提供 SSH 访问，不过其默认是关闭的。当然在配置面板可以打开，不过 WD 煞有介事的在上面提及乱搞的话会影响保修的。然后，然后它直接提供了一个 root 账户和密码！亏得它还知道提醒登录后立即修改密码。

熟练的你很快便会发现 MyCloud 运行一个基于 Debian Wheezy 的定制系统，尽管其 `mount` 返回结果很奇特，WD 支持文档表示该设备使用加密的私有文件系统，不可以格式化为 Ext4 或 NTFS 等常见文件系统，仅**允许通过 NFS 或 SMB 的方式供外界访问**。所以尽管有个 USB 3.0 接口，该设备并不能当作普通移动硬盘使用，充分解释了国内某B2O上该产品一星评论或者退货呼声的来源。

那么这个 USB 3.0 接口有什么用？官方的文档说明是可供扩充存储空间用，通过带外置供电的集线器最多能连接7个USB存储设备！
很棒是不是？不过这仅限于扩充容量，换句话说，仅适用于**通过USB写入数据到外部存储设备**。不知道是 Bug 还是真如某美亚评论中所说的“基于USB的加密措施”，从连接的 USB 3.0 移动硬盘转移数据到 MyCloud 内置硬盘本身非常的慢，远远无法达到 USB 3.0 的速度。而官方对于这种场景的使用建议是将移动硬盘连接到电脑，电脑连接通过有线连接路由器，路由器连接 MyCloud。

最后浏览了下 WD 的社区，有人提供针对这款设备的应用仓库，可以通过 apt-get 的方式扩充功能，提供下载和网络服务等等。由于在下有更多便于折腾的设备，没深究，不评论。

### 与 Linux 及 Android 手机配合

MyCloud 支持 NFS、SMB、FTP、AFP、DLNA 等访问方式，对于 Linux 平台来说最常用莫过于前两者了，MyCloud 作为服务器这些访问方式除了 FTP 都是默认同时开启的，不需要再配置或者纠结什么。

对于一般的文件访问，在 Linux 下最简便的当然是 SMB 方式了。以在下使用的 Fedora 工作站版默认搭载了 samba-client 且开启高段端口，可以在 Nautilus 文件管理器中直接找到 MyCloud，点击挂载即可，零难度。

若是想用更加友好原生且支持文件权限的 NFS 的话当然也可以，不过在我的百兆环境中用 NFS 传输性能反而不如 SMB，于是没配置了。

除了文件共享，NAS 的另外一大用于便是备份。WD 毫无意外的仅提供针对 Win 和 OS X 的 SmartWare 备份软件，然而 Linux 上并不缺乏备份软件，功能与其类似的便是 `rsync` 了。`rsync` 拥有一款 GTK 前端 [Grsync](http://www.opbyte.it/grsync/) 便于使用。它的界面非常直观，指定好要备份的文件夹，再选择要备份的目的地，这里既是通过 SMB 远程的 MyCloud 即可，点击开始即可。如果您注意到它中文化欠佳的话，请放心，完全修订后的版本已经发给作者，他表示将包含在下个版本中。

WD 为 Android 提供了 My Cloud 和 WD Photo 两款应用，功能大体类似，前者具备有限的设备管理功能（管理用户及固件升级），而后者专注照片管理和备份。真正用起来嘛，其在 Play Store 上不到 4 星的评分是分贴切：能用，但不是那么好用。

先说 My Cloud。打开后会比较聪明的找到局域网中的 MyCloud 设备，连接后还会询问是否备份手机中的照片。很贴心，但是自动备份了一段后卡死是什么鬼？不知道它选择用什么协议访问 MyCloud，用它下载从 NAS 复制文件到本地并不能满速。而且下载不询问保存目的地，直接扔到系统主内存，这遇到大文件怎么玩？音乐播放也是播一下，卡一会儿，杯具啊…

再说 WD Photos。同样在连接后会询问是否备份设备中的照片，值得欣慰的是这次不会卡死了，而且结果会按日期建成文件夹管理，赞。只是其浏览功能有问题，对于部分照片不能正确生成缩略图，这个问题在偏大的照片上更多见些。呃，全幅微单用户泪奔了…

在两款软件的设定中把玩了一圈无果，遂决定对自己好一些，换用 ES 文件浏览器用 SMB 访问。这下缩略图能显示了，传输可以满速了…视频节目在 802.11n 网络中，蓝光原盘会卡，1080P 的没问题。又用联网的电视尝试了下 DLNA 方式，smooth as butter。

总之，局域网访问 MyCloud 请用 SMB 或 DLNA，忘记 WD 客户端吧！

### MyCloud 远程访问

这款 MyCloud 相对于一般云存储的卖点既是提供称为“个人云”的远程访问功能。简而言之类似于结合了花生壳之类的动态 DNS 功能，使得可以在外通过互联网访问家中放置的 NAS，不用缴纳月租费。在任意浏览器访问 [MyCloud.com](http://www.mycloud.com)并使用 MyCloud.com 账户，便可以查看与 My Cloud 账户关联的 My Cloud NAS 设备。使用 My Cloud 远程访问并不要求有公网 IP，WD 提供了中继服务器。当然还是为了性能还是有公网 IP 比较好。

其网页版客户端功能还算齐备，上传管理支持多文件，下载支持按文件夹，只是缺乏一个搜索功能。此外还能执行帐户管理和远程唤醒的功能，后者对于公网 IP 更换导致的连接丢失有用。
此外它可以将 NAS 中保存的内容通过一个私密的连接分享给其他。类似的，也可以查看其它人通过该方式分享的文件。

在 Android 平台则又回到 My Cloud 和 WD Photos 这两个应用了。还是那句话：能用，但不好用。对于在下的 8M 小水管来说，公网访问速度慢是预期之中的，所以之前诟病的性能不是问题了。但其账号关联的过程则需要些摸索：谁能想到它不会主动关联已经注册到 MyCloud.com  的 MyCloud 设备呢？假使之前通过局域网访问添加的设备，还需要手动再次通过 MyCloud.com 登录一次才行。这个重要的细节很难觉察，因为这两款应用一旦通过局域网关联过设备，下次进入时便首先尝试连接局域网设备，结果必然是连接失败的，会给人一种 MyCloud.com 访问失败的假象。其实此时需要通过侧边栏的管理设备功能，选择添加设备，以 MyCloud.com 账户登录。另外，那些在局域网条件下便有的毛病依然存在：缩略图生成不总是有效。

### 结束语

相对于传统 NAS 厂商，WD 的这款 NAS 设备有着不错的性价比：算上运费和关税后总价 1.1K，价格和零售的 4TB 红盘十分接近。除了可以胜任传统 NAS 的局域网文件分享任务，额外的个人云服务在 Web 端表现不错。但是其在 Android 客户端在易用性和性能方面仍有很大的改善空间，除了云访问以外的场景还是用那些熟悉文件管理器更方便一些。